<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE hibernate-mapping PUBLIC "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
"http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">
<!-- Mapping file autogenerated by MyEclipse Persistence Tools -->
<hibernate-mapping>
	<class name="entity.Auctionrecord" table="AUCTIONRECORD" schema="SCOTT"
		lazy="false">
		<comment>竞拍记录</comment>
		<id name="id" type="java.lang.Integer">
			<column name="ID" precision="9" scale="0" />
			<generator class="sequence">

				<param name="sequence">RES_SEQ</param>

			</generator>
		</id>
		<many-to-one name="auction" class="entity.Auction" fetch="select"
			lazy="false">
			<column name="AUCTIONID" precision="6" scale="0" not-null="true">
				<comment>拍卖品编号</comment>
			</column>
		</many-to-one>
		<many-to-one name="auctionuser" class="entity.Auctionuser"
			fetch="select" lazy="false">
			<column name="USERID" precision="6" scale="0">
				<comment>竞拍者编号</comment>
			</column>
		</many-to-one>
		<property name="auctiontime">
			<column name="AUCTIONTIME" not-null="true">
				<comment>竞价时间</comment>
			</column>
		</property>
		<property name="auctionprice" type="java.lang.Double">
			<column name="AUCTIONPRICE" precision="9" not-null="true">
				<comment>竞拍价格</comment>
			</column>
		</property>
	</class>




	<query name="getacutionrecords">
	
	 <![CDATA[
    
      from Auctionrecord a inner join fetch a.auction u where a.auctionuser=:userid and u.auctionendtime<:auctionendtime 
       and a.auctionprice in (select max(r.auctionprice) from Auctionrecord r group by r.auction)
    ]]>

	</query>






</hibernate-mapping>
